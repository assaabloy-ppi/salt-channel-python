import asyncio
from .app_channel_v2_a import AppChannelV2A


class AppChannelV2(AppChannelV2A):

    def __init__(self, *args, **kwargs):
        super(AppChannelV2, self).__init__(*args, **kwargs)
        self.loop = asyncio.new_event_loop()

    def read(self):
        return self.loop.run_until_complete(super().read())

    def write(self, message, *args):
        self.loop.run_until_complete(super().write(message, *args))